
## 万象词库管理工具

配合["万象更新脚本"](https://github.com/rimeinn/rime-wanxiang-update-tools)同步使用，在方案词库更新后自动执行辅助码刷新、词条修改、新增删除等批量操作，实现词库管理的完全自动化。

---

## 配置文件格式说明

### 1. 修改规则文件 (`modifications.txt`)
**用途**：`刷带数字辅助码(重点)`、修改现有词条的辅助码和词频

**格式说明**：
```
# 单字修改（3种格式都支持）
格式1: 汉字\t拼音;新辅助码\t新词频
格式2: 汉字\t拼音;新辅助码          (词频可选)
格式3: 汉字\t拼音                  (只改拼音，不改辅助码)

# 多字词修改（2种格式都支持）
格式1: 词条\t新辅助码\t新词频
格式2: 词条\t新辅助码               (词频可选)
```

**具体示例**：
```txt
# 单字修改示例
朵	duǒ;jl	100      # 修改"朵"的辅助码为jl，词频设为100
的	de;bu	        # 修改"的"的辅助码为bu，保持原词频
了	le              # 修改"了"的拼音为le，保持原辅助码

# 多字词修改示例
你好	nǐ;rx hǎo;nz	815  # 修改"你好"的编码和词频
谢谢	xie xie               # 修改"谢谢"的拼音为xie xie
```

### 2. 新增词条文件 (`additions.txt`)
**用途**：添加新的词条到词库

**格式说明**：
```
# 格式：词条\t编码\t词频
# 编码可以是：纯拼音 或 拼音;辅助码
```

**具体示例**：
```txt
# 新增词条示例
自定义	zì;pm dìng;gr yì;dx	340  # 带辅助码和词频
新词条	xīn cí tiáo	20                 # 纯拼音，带词频
测试	cè;dd shì;yg                  # 带辅助码，无词频(默认1)
```

### 3. 删除词条文件 (`deletions.txt`)
**用途**：从词库中删除指定的词条

**格式说明**：
```
# 格式：词条\t编码
# 编码可以是：纯拼音 或 拼音;辅助码
# 支持任意长度的词条删除
```

**具体示例**：
```txt
# 删除词条示例
要删除的词	yào shān chú de cí
不需要的词	bù xū yào de cí
```

### 4. 轻声对应表 (`neutral_tone.txt`)
**用途**：定义轻声拼音与有声调拼音的对应关系,确保所有拼音变体都能正确应用修改规则

**格式说明**：
```
# 格式：汉字\t轻声拼音\t有声调拼音
```

**具体示例**：
```txt
# 轻声对应表示例
朵	duo	duǒ
的	de	dí
了	le	liǎo
着	zhe	zháo
```

## 关键特性说明

### 格式灵活性
- **拼音格式**：支持纯拼音（`nǐ hǎo`）和拼音+辅助码（`nǐ;rx hǎo;nz`）
- **词频可选**：词频字段是可选的，不提供时保持原词频或使用默认值
- **混合使用**：可以在同一个文件中混合使用不同格式

### 处理优先级
1. **删除操作**优先于所有其他操作
2. **修改操作**应用于现有词条
3. **新增操作**添加到用户扩展文件

### 自动扩展功能
当启用轻声处理时，工具会自动为每个修改规则生成对应的轻声版本，例如：
- 原始规则：`朵	duǒ;jl`
- 自动扩展：`朵	duo;jl`（基于轻声对应表）